{% extends "home/base.html" %}
{% load static %}
{% load i18n %}
{% load filters %}

{% block content %}

    {% comment %} ADD ROOM {% endcomment %}
    <div class="col-md-2 offset-8">
        <a class="btn btn-info btn-sm" href="{% url 'chat:add_room' %}">+{% trans 'Add Room' %}</a>
    </div>

    {% comment %} PUBLIC CHAT ROOMS {% endcomment %}
    <ul class="rooms col-md-8">
        <h4>{% trans 'Public chat rooms' %}</h4>
        {% for room in allowed_rooms %}
            {% if room.public == True and room.archived == False %}
                <li class="room-link text-uppercase" data-room-id="{{ room.id }}">{{ room|name_for:user }}</li>
            {% endif %}
        {% endfor %}
    </ul>

    {% comment %} PRIVATE MESSAGES {% endcomment %}
    <ul class="rooms col-md-8">
        <h4>{% trans 'Private messages' %}</h4>
        {% for room in allowed_rooms %}
            {% if room.public == False and room.archived == False %}
                <li class="room-link offline" data-room-id="{{ room.id }}">{{ room|name_for:user }}</li>
            {% endif %}
        {% endfor %}
    </ul>

    {% comment %} ARCHIVED PUBLIC ROOMS {% endcomment %}

    <div class="container">
        <div class="row">
            <div class="col text-center">
                <p>
                    <button class="btn btn-secondary btn-sm" data-toggle="collapse" data-target="#archive" role="button" aria-expanded="false" aria-controls="collapseExample">
                    {% trans "Archived chats" %}</button>
                </p>
            </div>
        </div>
    </div>

    <div id="archive" class="collapse">
        <p>
            <ul class="list-group">
                <li class="list-group-item">
                    {% trans 'Public chat rooms are archived if they are not used for' %}
                    <span class="badge badge-primary badge-pill">{{ ARCHIVE_CHAT_ROOM }}</span>
                    {% trans 'days. After' %} 
                    <span class="badge badge-primary badge-pill">{{ DELETE_CHAT_ROOM }}</span>
                    {% trans 'days they are deleted.' %}
                </li>
                <li class="list-group-item">
                    {% trans 'Private messages are archived when user is blocked and deleted after' %} 
                    <span class="badge badge-primary badge-pill">{{ DELETE_CHAT_ROOM }}</span>
                    {% trans 'days' %}
                </li>
            </ul>
        </p>

        {% comment %} PUBLIC ROOMS {% endcomment %}
        <ul class="rooms col-md-8">
            {% for room in allowed_rooms %}
                {% if room.archived == True and room.public == True %}
                    <li class="room-link text-uppercase" data-room-id="{{ room.id }}">{{ room }}</li>
                {% endif %}
            {% endfor %}
        </ul>

        {% comment %} PRIVATE MESSAGES {% endcomment %}
        <ul class="rooms col-md-8">
            {% for room in allowed_rooms %}
                {% if room.archived == True and room.public == False %}
                    <li class="room-link" data-room-id="{{ room.id }}">{{ room }}</li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>



    {% comment %} HERE CHATS WILL APPEAR {% endcomment %}
    <div id="chats" class="col-md-12"></div>



{% endblock content %}

{% block extra_body %}
    <script src="{% static 'home/js/chat.js' %}"></script>
{% endblock extra_body %}
